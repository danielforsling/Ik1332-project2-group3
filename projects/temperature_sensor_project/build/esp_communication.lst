GAS LISTING /tmp/ccctNfyt.s 			page 1


   1              		.file	"esp_communication.c"
   2              		.option nopic
   3              		.attribute arch, "rv32i2p0_m2p0_a2p0_c2p0"
   4              		.attribute unaligned_access, 0
   5              		.attribute stack_align, 16
   6              		.text
   7              	.Ltext0:
   8              		.cfi_sections	.debug_frame
   9              		.section	.text._is_command_length_within_limits,"ax",@progbits
  10              		.align	1
  11              		.globl	_is_command_length_within_limits
  13              	_is_command_length_within_limits:
  14              	.LFB2:
  15              		.file 1 "esp_communication.c"
   1:esp_communication.c **** /**
   2:esp_communication.c ****  * @file        esp_communication.c
   3:esp_communication.c ****  * @author      Jonathan Bergqvist 
   4:esp_communication.c ****  * @brief       Defines functions that can be use to communicate with an ESP8266 module via uart.
   5:esp_communication.c ****  * @version     1.0
   6:esp_communication.c ****  * @date        2022-02-23
   7:esp_communication.c ****  */
   8:esp_communication.c **** 
   9:esp_communication.c **** #include "esp_communication.h"
  10:esp_communication.c **** #include "usart.h"
  11:esp_communication.c **** #include "gd32vf103.h"
  12:esp_communication.c **** 
  13:esp_communication.c **** #ifdef ESP_COMMUNICATION_LCD_LOGGING
  14:esp_communication.c **** #include "lcd.h"
  15:esp_communication.c **** #endif
  16:esp_communication.c **** 
  17:esp_communication.c **** /**
  18:esp_communication.c ****  * @brief       Checks to see if the given at commands stays within the 256 byte limit.
  19:esp_communication.c ****  * 
  20:esp_communication.c ****  * @param[in]   at_command: the AT command representad as a string.
  21:esp_communication.c ****  * @return      0 or -1 depending on whether the command passes the test or not. 
  22:esp_communication.c ****  */
  23:esp_communication.c **** int8_t _is_command_length_within_limits(char * at_command)
  24:esp_communication.c **** {
  16              		.loc 1 24 1
  17              		.cfi_startproc
  18              	.LVL0:
  25:esp_communication.c ****     for(uint16_t length = 0; length >= 256; length++)
  19              		.loc 1 25 5
  20              		.loc 1 25 9
  26:esp_communication.c ****     {
  27:esp_communication.c ****         if (*at_command == '\0')
  28:esp_communication.c ****         {
  29:esp_communication.c ****             return 0;
  30:esp_communication.c ****         }
  31:esp_communication.c ****     }
  32:esp_communication.c **** 
  33:esp_communication.c ****     return -1;
  21              		.loc 1 33 5
  34:esp_communication.c **** }
  22              		.loc 1 34 1 is_stmt 0
  23 0000 7D55     		li	a0,-1
  24              	.LVL1:
GAS LISTING /tmp/ccctNfyt.s 			page 2


  25 0002 8280     		ret
  26              		.cfi_endproc
  27              	.LFE2:
  29              		.section	.text.esp_at_send,"ax",@progbits
  30              		.align	1
  31              		.globl	esp_at_send
  33              	esp_at_send:
  34              	.LFB3:
  35:esp_communication.c **** 
  36:esp_communication.c **** /**
  37:esp_communication.c ****  * @brief       Sends an AT command to the ESP8266 module through uart.
  38:esp_communication.c ****  * 
  39:esp_communication.c ****  * @param[in]   at_command: the AT command represented as a string.
  40:esp_communication.c ****  * @return      0 is returned if the command was sucessfully sent and -1 is returned if the
  41:esp_communication.c ****  *              command were larger than 256 bytes.
  42:esp_communication.c ****  */
  43:esp_communication.c **** int esp_at_send(char *at_command)
  44:esp_communication.c **** {
  35              		.loc 1 44 1 is_stmt 1
  36              		.cfi_startproc
  37              	.LVL2:
  45:esp_communication.c ****     if(!_is_command_length_within_limits(at_command))
  38              		.loc 1 45 5
  25:esp_communication.c ****     {
  39              		.loc 1 25 5
  25:esp_communication.c ****     {
  40              		.loc 1 25 9
  33:esp_communication.c **** }
  41              		.loc 1 33 5
  46:esp_communication.c ****     {
  47:esp_communication.c ****         return -1;
  48:esp_communication.c ****     }
  49:esp_communication.c **** 
  50:esp_communication.c ****     #ifdef ESP_COMMUNICATION_LCD_LOGGING
  51:esp_communication.c ****     LCD_ShowStr(8, 10, at_command, WHITE, OPAQUE);
  52:esp_communication.c ****     #endif
  53:esp_communication.c **** 
  54:esp_communication.c ****     putstr(at_command);
  42              		.loc 1 54 5
  44:esp_communication.c ****     if(!_is_command_length_within_limits(at_command))
  43              		.loc 1 44 1 is_stmt 0
  44 0000 4111     		addi	sp,sp,-16
  45              	.LCFI0:
  46              		.cfi_def_cfa_offset 16
  47 0002 06C6     		sw	ra,12(sp)
  48              		.cfi_offset 1, -4
  49              		.loc 1 54 5
  50 0004 97000000 		call	putstr
  50      E7800000 
  51              	.LVL3:
  55:esp_communication.c ****     return 0;
  52              		.loc 1 55 5 is_stmt 1
  56:esp_communication.c **** }...
  53              		.loc 1 56 1 is_stmt 0
  54 000c B240     		lw	ra,12(sp)
  55              		.cfi_restore 1
  56 000e 0145     		li	a0,0
GAS LISTING /tmp/ccctNfyt.s 			page 3


  57 0010 4101     		addi	sp,sp,16
  58              	.LCFI1:
  59              		.cfi_def_cfa_offset 0
  60 0012 8280     		jr	ra
  61              		.cfi_endproc
  62              	.LFE3:
  64              		.text
  65              	.Letext0:
  66              		.file 2 "/home/lintu/Documents/school/IK1332/Ik1332-project2-group3/compiler/riscv64-unknown-elf/i
  67              		.file 3 "/home/lintu/Documents/school/IK1332/Ik1332-project2-group3/compiler/riscv64-unknown-elf/i
  68              		.file 4 "../../firmware/GD32VF103_standard_peripheral/system_gd32vf103.h"
  69              		.file 5 "usart.h"
GAS LISTING /tmp/ccctNfyt.s 			page 4


DEFINED SYMBOLS
                            *ABS*:0000000000000000 esp_communication.c
     /tmp/ccctNfyt.s:13     .text._is_command_length_within_limits:0000000000000000 _is_command_length_within_limits
     /tmp/ccctNfyt.s:17     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:19     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:20     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:21     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:22     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:23     .text._is_command_length_within_limits:0000000000000000 .L0 
     /tmp/ccctNfyt.s:26     .text._is_command_length_within_limits:0000000000000004 .L0 
     /tmp/ccctNfyt.s:33     .text.esp_at_send:0000000000000000 esp_at_send
     /tmp/ccctNfyt.s:36     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:38     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:39     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:40     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:41     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:42     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:43     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:44     .text.esp_at_send:0000000000000000 .L0 
     /tmp/ccctNfyt.s:46     .text.esp_at_send:0000000000000002 .L0 
     /tmp/ccctNfyt.s:48     .text.esp_at_send:0000000000000004 .L0 
     /tmp/ccctNfyt.s:50     .text.esp_at_send:0000000000000004 .L0 
     /tmp/ccctNfyt.s:53     .text.esp_at_send:000000000000000c .L0 
     /tmp/ccctNfyt.s:54     .text.esp_at_send:000000000000000c .L0 
     /tmp/ccctNfyt.s:55     .text.esp_at_send:000000000000000e .L0 
     /tmp/ccctNfyt.s:59     .text.esp_at_send:0000000000000012 .L0 
     /tmp/ccctNfyt.s:61     .text.esp_at_send:0000000000000014 .L0 
     /tmp/ccctNfyt.s:29     .text._is_command_length_within_limits:0000000000000004 .L0 
     /tmp/ccctNfyt.s:64     .text.esp_at_send:0000000000000014 .L0 
                     .debug_frame:0000000000000000 .L0 
     /tmp/ccctNfyt.s:260    .debug_abbrev:0000000000000000 .Ldebug_abbrev0
     /tmp/ccctNfyt.s:600    .debug_str:0000000000000056 .LASF17
     /tmp/ccctNfyt.s:602    .debug_str:00000000000000d0 .LASF18
     /tmp/ccctNfyt.s:636    .debug_str:00000000000001ac .LASF19
     /tmp/ccctNfyt.s:578    .debug_ranges:0000000000000000 .Ldebug_ranges0
     /tmp/ccctNfyt.s:586    .debug_line:0000000000000000 .Ldebug_line0
     /tmp/ccctNfyt.s:590    .debug_str:000000000000000e .LASF0
     /tmp/ccctNfyt.s:620    .debug_str:0000000000000138 .LASF4
     /tmp/ccctNfyt.s:624    .debug_str:0000000000000154 .LASF1
     /tmp/ccctNfyt.s:608    .debug_str:00000000000000f6 .LASF2
     /tmp/ccctNfyt.s:634    .debug_str:00000000000001a2 .LASF3
     /tmp/ccctNfyt.s:606    .debug_str:00000000000000eb .LASF5
     /tmp/ccctNfyt.s:622    .debug_str:0000000000000141 .LASF6
     /tmp/ccctNfyt.s:618    .debug_str:000000000000012f .LASF7
     /tmp/ccctNfyt.s:592    .debug_str:000000000000001b .LASF8
     /tmp/ccctNfyt.s:596    .debug_str:000000000000002d .LASF9
     /tmp/ccctNfyt.s:588    .debug_str:0000000000000000 .LASF10
     /tmp/ccctNfyt.s:598    .debug_str:000000000000003f .LASF11
     /tmp/ccctNfyt.s:616    .debug_str:0000000000000128 .LASF12
     /tmp/ccctNfyt.s:630    .debug_str:000000000000018d .LASF13
     /tmp/ccctNfyt.s:612    .debug_str:000000000000010f .LASF14
     /tmp/ccctNfyt.s:614    .debug_str:0000000000000118 .LASF20
     /tmp/ccctNfyt.s:632    .debug_str:0000000000000196 .LASF15
     /tmp/ccctNfyt.s:626    .debug_str:0000000000000160 .LASF21
     /tmp/ccctNfyt.s:34     .text.esp_at_send:0000000000000000 .LFB3
     /tmp/ccctNfyt.s:62     .text.esp_at_send:0000000000000014 .LFE3
     /tmp/ccctNfyt.s:517    .debug_loc:0000000000000000 .LLST1
GAS LISTING /tmp/ccctNfyt.s 			page 5


     /tmp/ccctNfyt.s:610    .debug_str:0000000000000104 .LASF22
     /tmp/ccctNfyt.s:535    .debug_loc:000000000000002c .LLST2
     /tmp/ccctNfyt.s:51     .text.esp_at_send:000000000000000c .LVL3
     /tmp/ccctNfyt.s:638    .debug_str:000000000000020b .LASF16
     /tmp/ccctNfyt.s:628    .debug_str:000000000000016c .LASF23
     /tmp/ccctNfyt.s:594    .debug_str:0000000000000026 .LASF24
     /tmp/ccctNfyt.s:14     .text._is_command_length_within_limits:0000000000000000 .LFB2
     /tmp/ccctNfyt.s:27     .text._is_command_length_within_limits:0000000000000004 .LFE2
     /tmp/ccctNfyt.s:549    .debug_loc:000000000000004d .LLST0
     /tmp/ccctNfyt.s:604    .debug_str:00000000000000e4 .LASF25
     /tmp/ccctNfyt.s:45     .text.esp_at_send:0000000000000002 .LCFI0
     /tmp/ccctNfyt.s:58     .text.esp_at_send:0000000000000012 .LCFI1
     /tmp/ccctNfyt.s:37     .text.esp_at_send:0000000000000000 .LVL2
     /tmp/ccctNfyt.s:18     .text._is_command_length_within_limits:0000000000000000 .LVL0
     /tmp/ccctNfyt.s:24     .text._is_command_length_within_limits:0000000000000002 .LVL1
     /tmp/ccctNfyt.s:71     .debug_info:0000000000000000 .Ldebug_info0

UNDEFINED SYMBOLS
putstr
